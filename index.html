<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>FOODMART Daily Report (no scroll)</title>
  <style>
    * {
      box-sizing: border-box;
    }

    :root {
      --border: #111;
      --thin: 1px;
      --pad: 4px;
      --font: 13px;
      --label: 18px;
      --rowh: 36px;          /* aggressively reduced */
      --title: 18px;
    }

    body {
      margin: 0;
      padding: 4px;
      background: #e2e2e2;
      font-family: Arial, Helvetica, sans-serif;
      font-size: var(--font);
      color: #111;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }

    /* ultra-compact page */
    .page {
      width: 940px;
      max-width: 100%;
      background: #fff;
      border: 2px solid var(--border);
      padding: 6px 10px 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    /* header - compact */
    .header {
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
      gap: 6px;
      margin-bottom: 4px;
    }
    .header h1 {
      margin: 0;
      font-size: var(--title);
      font-weight: 800;
      letter-spacing: 0.3px;
      text-align: center;
      flex: 1;
      line-height: 1.2;
    }
    .date {
      width: 180px;
      display: flex;
      gap: 4px;
      align-items: center;
    }
    .date label {
      font-size: var(--label);
      font-weight: 600;
    }
    .date input {
      width: 120px;
      border: none;
      border-bottom: 1px solid #333;
      padding: 2px 2px;
      font-size: var(--font);
      outline: none;
      background: transparent;
    }

    /* main table */
    table {
      width: 100%;
      border-collapse: collapse;
      table-layout: fixed;
    }
    .main {
      border: var(--thin) solid var(--border);
    }
    .main td, .main th {
      border: var(--thin) solid var(--border);
      padding: 0;
      vertical-align: middle;
    }

    .col-left { width: 33%; }
    .col-mid  { width: 34%; }
    .col-right{ width: 33%; }

    .cell {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 4px;
      padding: 0 4px;
      height: var(--rowh);
    }
    .lbl {
      font-size: var(--label);
      font-weight: 700;
      white-space: nowrap;
    }
    .val {
      width: 100%;
      text-align: right;
      font-size: 22px;
      border: none;
      outline: none;
      padding: 2px 2px;
      background: transparent;
      border-bottom: 1px dotted #888;
    }
    .val.small {
      font-size: 11px;
    }
    .val:read-only {
      font-weight: 600;
      border-bottom: 1px solid #111;
      background-color: #f9f9f9;
    }
    .cell.blank .lbl { visibility: hidden; }
    .cell.blank .val { visibility: hidden; }

    /* spacer cells */
    .spacer {
      background: #fff;
      height: var(--rowh);
    }

    /* purchase table - compact */
    .section-title {
      margin: 6px 0 2px;
      font-size: 11px;
      font-weight: 700;
    }
    .purchase {
      border: var(--thin) solid var(--border);
      width: 100%;
      border-collapse: collapse;
    }
    .purchase th, .purchase td {
      border: var(--thin) solid var(--border);
      padding: 2px 3px;
      height: 34px;
    }
    .purchase th {
      text-align: left;
      font-weight: 700;
      font-size: 10px;
    }
    .purchase input {
      width: 100%;
      border: none;
      outline: none;
      font-size: 11px;
      background: transparent;
      border-bottom: 1px dotted #aaa;
      padding: 1px 0;
    }
    .purchase .amount input {
      text-align: right;
    }

    /* expenses boxes â€” compact */
    .expenses-wrap {
      border: var(--thin) solid var(--border);
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      height: 28px;
      margin-top: 2px;
    }
    .expenses-box {
      border-right: var(--thin) solid var(--border);
      display: flex;
      align-items: center;
      padding: 0 4px;
    }
    .expenses-box:last-child {
      border-right: none;
    }
    .expenses-box input {
      width: 100%;
      border: none;
      outline: none;
      font-size: 11px;
      background: transparent;
      text-align: left;
      padding: 2px 0;
      border-bottom: 1px dotted #555;
    }

    /* action buttons - minimal */
    .actions {
      margin-top: 6px;
      display: flex;
      gap: 6px;
      justify-content: flex-end;
    }
    button {
      border: 1px solid #000;
      background: #000;
      color: #fff;
      padding: 4px 10px;
      font-weight: 700;
      cursor: pointer;
      font-size: 10px;
    }
    .ghost {
      background: #fff;
      color: #000;
    }

    @media print {
      body { background: #fff; padding: 0; display: block; }
      .page { border: none; box-shadow: none; width: 100%; }
      .actions { display: none; }
      .date input { border-bottom: 1px solid #000; }
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="header">
      <div class="date">
        <label>Date</label>
        <input type="text" id="date" placeholder="MM/DD/YYYY">
      </div>
      <h1>FOODMART DAILY</h1>
      <div style="width:180px;"></div>
    </div>

    <!-- MAIN GRID -->
    <table class="main">
      <colgroup>
        <col class="col-left"><col class="col-mid"><col class="col-right">
      </colgroup>
      <!-- row 1 -->
      <tr>
        <td><div class="cell"><span class="lbl">Lottery activated</span><input class="val small" id="lotteryActivated"></div></td>
        <td><div class="cell"><span class="lbl">In Sale</span><input class="val num sale" id="inSale"></div></td>
        <td><div class="cell"><span class="lbl">Cash</span><input class="val num pay" id="cash"></div></td>
      </tr>
      <!-- row 2 -->
      <tr>
        <td><div class="cell"><span class="lbl">Regular</span><input class="val small" id="leftRegular"></div></td>
        <td><div class="cell"><span class="lbl">Smoke</span><input class="val num sale" id="smoke"></div></td>
        <td><div class="cell"><span class="lbl">Card / Charge</span><input class="val num pay" id="cardCharge"></div></td>
      </tr>
      <!-- row 3 -->
      <tr>
        <td><div class="cell"><span class="lbl">Plus</span><input class="val small" id="leftPlus"></div></td>
        <td><div class="cell"><span class="lbl">Regular</span><input class="val num sale" id="regularSale"></div></td>
        <td><div class="cell"><span class="lbl">EBT</span><input class="val num pay" id="ebt"></div></td>
      </tr>
      <!-- row 4 -->
      <tr>
        <td><div class="cell"><span class="lbl">Premium</span><input class="val small" id="leftPremium"></div></td>
        <td><div class="cell"><span class="lbl">Plus</span><input class="val num sale" id="plusSale"></div></td>
        <td><div class="cell"><span class="lbl">Online</span><input class="val num pay" id="online"></div></td>
      </tr>
      <!-- row 5 -->
      <tr>
        <td><div class="cell"><span class="lbl">Diesel</span><input class="val small" id="diesel"></div></td>
        <td><div class="cell"><span class="lbl">Premium</span><input class="val num sale" id="premiumSale"></div></td>
        <td><div class="cell"><span class="lbl">G.M</span><input class="val num pay" id="gm"></div></td>
      </tr>
      <!-- row 6 -->
      <tr>
        <td><div class="cell blank"><span class="lbl">x</span><input class="val"></div></td>
        <td><div class="cell"><span class="lbl">Lotto</span><input class="val num sale" id="lotto"></div></td>
        <td><div class="cell"><span class="lbl">Lottery payout</span><input class="val num" id="lotteryPayout"></div></td>
      </tr>
      <!-- row 7 -->
      <tr>
        <td class="spacer"></td>
        <td><div class="cell"><span class="lbl">Lottery</span><input class="val num sale" id="lottery"></div></td>
        <td><div class="cell"><span class="lbl">Purchase out</span><input class="val num" id="purchaseOut"></div></td>
      </tr>
      <!-- row 8 -->
      <tr>
        <td class="spacer"></td>
        <td><div class="cell"><span class="lbl">Others</span><input class="val num sale" id="others"></div></td>
        <td><div class="cell"><span class="lbl">Expenses</span><input class="val num" id="expensesTotal"></div></td>
      </tr>
      <!-- row 9 -->
      <tr>
        <td class="spacer"></td>
        <td class="spacer"></td>
        <td><div class="cell"><span class="lbl">Discount</span><input class="val num" id="discount"></div></td>
      </tr>
      <!-- row 10 -->
      <tr>
        <td class="spacer"></td>
        <td class="spacer"></td>
        <td><div class="cell"><span class="lbl">Short/over</span><input class="val num" id="shortOver" readonly></div></td>
      </tr>
      <!-- row 11 -->
      <tr>
        <td class="spacer"></td>
        <td><div class="cell"><span class="lbl">Tax</span><input class="val num" id="tax"></div></td>
        <td class="spacer"></td>
      </tr>
      <!-- row 12 -->
      <tr>
        <td class="spacer"></td>
        <td><div class="cell"><span class="lbl">Total sale</span><input class="val num" id="totalSale" readonly></div></td>
        <td><div class="cell"><span class="lbl">Total</span><input class="val num" id="rightTotal" readonly></div></td>
      </tr>
    </table>

    <!-- PURCHASE SECTION -->
    <div class="section-title">Purchase</div>
    <table class="purchase">
      <thead>
        <tr><th style="width:36%">Details</th><th style="width:22%">Amount</th><th style="width:20%">Method</th><th style="width:22%">Remarks</th></tr>
      </thead>
      <tbody>
        <tr><td><input id="p1Details"></td><td class="amount"><input class="num purchaseAmt" id="p1Amount"></td><td><input id="p1Method"></td><td><input id="p1Remarks"></td></tr>
        <tr><td><input id="p2Details"></td><td class="amount"><input class="num purchaseAmt" id="p2Amount"></td><td><input id="p2Method"></td><td><input id="p2Remarks"></td></tr>
      </tbody>
    </table>

    <!-- EXPENSES BOXES -->
    <div class="section-title" style="margin-top:6px;">Expenses</div>
    <div class="expenses-wrap">
      <div class="expenses-box"><input type="text" id="exp1" placeholder="Item 1"></div>
      <div class="expenses-box"><input type="text" id="exp2" placeholder="Item 2"></div>
      <div class="expenses-box"><input type="text" id="exp3" placeholder="Item 3"></div>
    </div>

    <!-- BUTTONS - removed fill sample, only print -->
    <div class="actions">
      <button type="button" onclick="window.print()">Print</button>
    </div>
  </div>

  <script>
    (function() {
      // --- numeric parser (allows simple expressions like "1093.31 + 277")
      function parseMoney(v) {
        if (!v && v !== 0) return 0;
        const s = String(v).replace(/,/g, '').trim();
        if (s === '') return 0;
        // allow digits, +, -, ., spaces
        if (!/^[0-9+\-.\s]+$/.test(s)) return Number(s) || 0;
        try {
          // safe evaluation of simple arithmetic
          const result = Function('"use strict"; return (' + s + ')')();
          return (typeof result === 'number' && !isNaN(result)) ? result : 0;
        } catch {
          return Number(s) || 0;
        }
      }

      function fmt(n) {
        return (Math.round((n + Number.EPSILON) * 100) / 100).toFixed(2);
      }

      // main recalculation
      window.recalc = function() {
        // middle column: sales
        const saleIds = ["inSale","smoke","regularSale","plusSale","premiumSale","lotto","lottery","others"];
        let sales = 0;
        saleIds.forEach(id => {
          const el = document.getElementById(id);
          if (el) sales += parseMoney(el.value);
        });

        const tax = parseMoney(document.getElementById("tax")?.value);
        const totalSale = sales + tax;
        const totalSaleEl = document.getElementById("totalSale");
        if (totalSaleEl) totalSaleEl.value = fmt(totalSale);

        // right column: payments including lottery payout
        const payIds = ["cash","cardCharge","ebt","online","gm"];
        let rightTotal = 0;
        payIds.forEach(id => {
          const el = document.getElementById(id);
          if (el) rightTotal += parseMoney(el.value);
        });

        // ADD LOTTERY PAYOUT to right total (as it's on the right column)
        rightTotal += parseMoney(document.getElementById("lotteryPayout")?.value);

        const rightTotalEl = document.getElementById("rightTotal");
        if (rightTotalEl) rightTotalEl.value = fmt(rightTotal);

        // short/over = right total - total sale
        const shortOver = rightTotal - totalSale;
        const shortEl = document.getElementById("shortOver");
        if (shortEl) shortEl.value = fmt(shortOver);
      };

      // attach listeners to all .num and relevant fields
      function attachRecalc() {
        const fields = document.querySelectorAll('.num, #tax, #inSale, #smoke, #regularSale, #plusSale, #premiumSale, #lotto, #lottery, #others, #cash, #cardCharge, #ebt, #online, #gm, #lotteryPayout');
        fields.forEach(el => {
          el.addEventListener('input', recalc);
          el.addEventListener('change', recalc);
        });
        // also any other inputs that might affect totals
        document.getElementById('purchaseOut')?.addEventListener('input', recalc);
        document.getElementById('expensesTotal')?.addEventListener('input', recalc);
        document.getElementById('discount')?.addEventListener('input', recalc);
      }

      // initial recalc
      setTimeout(() => {
        attachRecalc();
        recalc();
      }, 10);

    })();
  </script>
</body>
</html>
